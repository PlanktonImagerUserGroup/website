<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Example User Group</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <nav>
    <a href="#hero">Home</a>
    <a href="#about">About</a>
    <a href="#events">Events</a>
    <a href="#join">Join</a>
  </nav>

  <main class="snap-container">

    <section id="hero" class="snap-section hero">
      <h1>Example User Group</h1>
      <p>A community for learning and sharing together.</p>
    </section>

    <section id="about" class="snap-section">
      <h2>About the Group</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </section>

    <section id="events" class="snap-section">
      <h2>Events</h2>
      <p>Monthly meetups, guest speakers, hands-on sessions.</p>
    </section>

    <section id="join" class="snap-section">
      <h2>Join</h2>
      <p>Find us online and get involved.</p>
      <p>
        <a href="#">GitHub</a> | <a href="#">Meetup</a>
      </p>
    </section>

  </main>

  <script>
    const container = document.querySelector('.snap-container');
    const sections = Array.from(document.querySelectorAll('.snap-section'));

    let currentScroll = 0;
    let targetScroll = 0;
    let isSnapping = false;
    let snapTimeout;

    currentScroll = targetScroll = container.scrollTop;

    /* Smooth wheel scrolling */
    container.addEventListener('wheel', (e) => {
      e.preventDefault();

      targetScroll += e.deltaY * 0.8;
      targetScroll = Math.max(
        0,
        Math.min(
          targetScroll,
          container.scrollHeight - container.clientHeight
        )
      );

      startSmoothScroll();

      clearTimeout(snapTimeout);
      snapTimeout = setTimeout(() => snapToSection(), 150);
    }, { passive: false });

    /* Scrollbar drag sync */
    container.addEventListener('scroll', () => {
      if (!isSnapping) {
        currentScroll = targetScroll = container.scrollTop;
      }
    });

    function startSmoothScroll() {
      if (isSnapping) return;

      isSnapping = true;

      function animate() {
        currentScroll += (targetScroll - currentScroll) * 0.12;
        container.scrollTop = currentScroll;

        if (Math.abs(targetScroll - currentScroll) > 0.5) {
          requestAnimationFrame(animate);
        } else {
          isSnapping = false;
        }
      }

      requestAnimationFrame(animate);
    }

    function snapToSection() {
      const scrollTop = container.scrollTop;

      let closest = sections[0];
      let minDistance = Math.abs(scrollTop - closest.offsetTop);

      sections.forEach(section => {
        const distance = Math.abs(scrollTop - section.offsetTop);
        if (distance < minDistance) {
          minDistance = distance;
          closest = section;
        }
      });

      bounceScrollTo(closest.offsetTop);
    }

    function bounceScrollTo(target) {
      const start = container.scrollTop;
      const distance = target - start;
      const duration = 800;

      let startTime = null;

      function easeOutElastic(t) {
        return Math.sin(-13 * (t + 1) * Math.PI / 2) * Math.pow(2, -10 * t) + 1;
      }

      function animate(time) {
        if (!startTime) startTime = time;
        const progress = Math.min((time - startTime) / duration, 1);
        const eased = easeOutElastic(progress);

        container.scrollTop = start + distance * eased;

        if (progress < 1) {
          requestAnimationFrame(animate);
        }
      }

      requestAnimationFrame(animate);
    }
  </script>

</body>
</html>
